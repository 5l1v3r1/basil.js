!function(){var e=function(t){return e.utils.extend(e.plugins,(new e.Storage).init(t))};e.version="0.4.0",e.utils={extend:function(){for(var e="object"==typeof arguments[0]?arguments[0]:{},t=1;t<arguments.length;t++)if(arguments[t]&&"object"==typeof arguments[t])for(var n in arguments[t])e[n]=arguments[t][n];return e},each:function(e,t,n){if(this.isArray(e)){for(var i=0;i<e.length;i++)if(t.call(n,e[i],i)===!1)return}else if(e)for(var r in e)if(t.call(n,e[r],r)===!1)return},tryEach:function(e,t,n,i){this.each(e,function(e,r){try{return t.call(i,e,r)}catch(o){if(this.isFunction(n))try{n.call(i,e,r,o)}catch(o){}}},this)},registerPlugin:function(t){e.plugins=this.extend(t,e.plugins)}};for(var t=["Arguments","Boolean","Function","String","Array","Number","Date","RegExp"],n=0;n<t.length;n++)e.utils["is"+t[n]]=function(e){return function(t){return Object.prototype.toString.call(t)==="[object "+e+"]"}}(t[n]);e.plugins={},e.options=e.utils.extend({namespace:"b45i1",storages:["local","cookie","session","memory"],expireDays:365},window.Basil?window.Basil.options:{}),e.Storage=function(){var t="b45i1"+(Math.random()+1).toString(36).substring(7),n={},i=function(t){return e.utils.isArray(t)?t:e.utils.isString(t)?[t]:[]},r=function(t,n){var i="";return e.utils.isString(n)&&n.length&&(n=[n]),e.utils.isArray(n)&&n.length&&(i=n.join(":")),i&&t?t+":"+i:i},o=function(e,t){return e?t.replace(new RegExp("^"+e+":"),""):t},s=function(e){return JSON.stringify(e)},u=function(e){return JSON.parse(e)},c={engine:null,check:function(){try{window[this.engine].setItem(t,!0),window[this.engine].removeItem(t)}catch(e){return!1}return!0},set:function(e,t){e&&window[this.engine].setItem(e,t)},get:function(e){return window[this.engine].getItem(e)},remove:function(e){window[this.engine].removeItem(e)},reset:function(e){for(var t,n=0;n<window[this.engine].length;n++)t=window[this.engine].key(n),e&&0!==t.indexOf(e)||(this.remove(t),n--)},keys:function(e){for(var t,n=[],i=0;i<window[this.engine].length;i++)t=window[this.engine].key(i),e&&0!==t.indexOf(e)||n.push(o(e,t));return n}};return n.local=e.utils.extend({},c,{engine:"localStorage"}),n.session=e.utils.extend({},c,{engine:"sessionStorage"}),n.memory={_hash:{},check:function(){return!0},set:function(e,t){e&&(this._hash[e]=t)},get:function(e){return this._hash[e]||null},remove:function(e){delete this._hash[e]},reset:function(e){for(var t in this._hash)e&&0!==t.indexOf(e)||this.remove(t)},keys:function(e){var t=[];for(var n in this._hash)e&&0!==n.indexOf(e)||t.push(o(e,n));return t}},n.cookie={check:function(){return navigator.cookieEnabled},set:function(e,t,n){if(!this.check())throw"SecurityError: cookies are disabled";if(n=n||{},e){var i=e+"="+t;if(n.expireDays){var r=new Date;r.setTime(r.getTime()+24*n.expireDays*60*60*1e3),i+="; expires="+r.toGMTString()}n.domain&&(i+="; domain="+n.domain),document.cookie=i+"; path=/"}},get:function(e){if(!this.check())throw"SecurityError: cookies are disabled";for(var t,n=document.cookie?document.cookie.split(";"):[],i=0;i<n.length;i++)if(t=n[i].replace(/^\s*/,""),0===t.indexOf(e+"="))return t.substring(e.length+1,t.length);return null},remove:function(e){if(!this.check())throw"SecurityError: cookies are disabled";if(e){this.set(e,"",{expireDays:-1});for(var t=document.domain.split("."),n=t.length-1;n>0;n--)this.set(e,"",{expireDays:-1,domain:"."+t.slice(-n).join(".")})}},reset:function(e){if(!this.check())throw"SecurityError: cookies are disabled";for(var t,n,i=document.cookie?document.cookie.split(";"):[],r=0;r<i.length;r++)t=i[r].replace(/^\s*/,""),n=t.substr(0,t.indexOf("=")),e&&0!==n.indexOf(e)||this.remove(n)},keys:function(e){if(!this.check())throw"SecurityError: cookies are disabled";for(var t,n,i=[],r=document.cookie?document.cookie.split(";"):[],s=0;s<r.length;s++)t=r[s].replace(/^\s*/,""),n=t.substr(0,t.indexOf("=")),e&&0!==n.indexOf(e)||i.push(o(e,n));return i}},{init:function(e){return this.setOptions(e),this},setOptions:function(t){this.options=e.utils.extend({},this.options||e.options,t)},support:function(e){return n.hasOwnProperty(e)},check:function(e){return this.support(e)?n[e].check():!1},set:function(t,o,u){u=e.utils.extend({},this.options,u),(t=r(u.namespace,t))&&(o=s(o),e.utils.tryEach(i(u.storages),function(e){return n[e].set(t,o,u),!1},function(e){this.support(e)&&n[e].remove(t)},this))},get:function(t,o){if(o=e.utils.extend({},this.options,o),!(t=r(o.namespace,t)))return null;var s=null;return e.utils.tryEach(i(o.storages),function(e){return null!==s?!1:void(this.support(e)&&(s=u(n[e].get(t,o))))},function(e){s=n[e].get(t,o)||null},this),s},remove:function(t,o){return o=e.utils.extend({},this.options,o),(t=r(o.namespace,t))?void e.utils.tryEach(i(o.storages),function(e){this.support(e)&&n[e].remove(t)},null,this):null},reset:function(t){t=e.utils.extend({},this.options,t),e.utils.tryEach(i(t.storages),function(e){this.support(e)&&n[e].reset(t.namespace)},null,this)},keys:function(e){e=e||{};var t=[];for(var n in this.keysMap(e))t.push(n);return t},keysMap:function(t){t=e.utils.extend({},this.options,t);var r={};return e.utils.tryEach(i(t.storages),function(i){return this.support(i)?void e.utils.each(n[i].keys(t.namespace),function(t){r[t]=e.utils.isArray(r[t])?r[t]:[],r[t].push(i)},this):!0},null,this),r},memory:n.memory,cookie:n.cookie,localStorage:n.local,sessionStorage:n.session}},window.Basil=e,"function"==typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports&&(module.exports=e)}();